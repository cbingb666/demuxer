{"version":3,"file":"demuxer.mp4.esm.js","sources":["../src/enum/events.ts","../src/util/event-emitter.ts","../src/types/globals.ts","../src/util/is.ts","../src/util/cache-buffer.ts","../src/util/multi-map.ts","../src/util/event-manager.ts","../src/util/global.ts","../src/util/logger.ts","../src/util/stream.ts","../src/demux-facade.ts","../src/mp4/mp4-inspector.ts","../src/mp4/demux.ts"],"sourcesContent":["/**\n * @file= events.js, created at Monday, 23rd December 2019 3=47=23 pm\n * @copyright Copyright (c) 2020\n * @author gem <gems.xu@gmail.com>\n */\n\nexport enum Events {\n\tERROR = 'ERROR',\n\tINFO = 'INFO',\n\tDATA = 'DATA',\n\tDEMUX_DATA = 'DEMUX_DATA',\n\tDONE = 'DONE'\n}\n","/**\n * @copyright https://github.com/nodejs/node/blob/master/lib/events.js\n */\n/* eslint-disable */\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar objectCreate = Object.create || objectCreatePolyfill;\nvar objectKeys = Object.keys || objectKeysPolyfill;\nvar bind = Function.prototype.bind || functionBindPolyfill;\n\n// By default Dispatchers will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nlet defaultMaxListeners = 10;\n\nexport default class EventEmitter {\n\tstatic listenerCount(emitter, type) {\n\t\tif (typeof emitter.listenerCount === 'function') {\n\t\t\treturn emitter.listenerCount(type);\n\t\t} else {\n\t\t\treturn listenerCount.call(emitter, type);\n\t\t}\n\t}\n\n\tstatic defaultMaxListeners: number;\n\n\t_maxListeners?: number;\n\t_eventsCount: number;\n\t_events: any;\n\n\tconstructor() {\n\t\tif (!this._events || !Object.prototype.hasOwnProperty.call(this, '_events')) {\n\t\t\tthis._events = objectCreate(null);\n\t\t\tthis._eventsCount = 0;\n\t\t}\n\n\t\tthis._maxListeners = this._maxListeners || undefined;\n\t}\n\n\t// // Obviously not all Emitters should be limited to 10. This function allows\n\t// // that to be increased. Set to zero for unlimited.\n\t// setMaxListeners(n) {\n\t//     if (typeof n !== 'number' || n < 0 || isNaN(n))\n\t//         throw new TypeError('\"n\" argument must be a positive number');\n\t//     this._maxListeners = n;\n\t//     return this;\n\t// }\n\t//\n\t// getMaxListeners() {\n\t//     return $getMaxListeners(this);\n\t// }\n\n\temit(type: string, ...rest) {\n\t\tvar er, handler, len, args, i, events;\n\t\tvar doError = type === 'error';\n\n\t\tevents = this._events;\n\t\tif (events) doError = doError && events.error == null;\n\t\telse if (!doError) return false;\n\n\t\t// If there is no 'error' event listener then throw.\n\t\tif (doError) {\n\t\t\tif (arguments.length > 1) er = arguments[1];\n\t\t\tif (er instanceof Error) {\n\t\t\t\tthrow er; // Unhandled 'error' event\n\t\t\t} else {\n\t\t\t\t// At least give some kind of context to the user\n\t\t\t\tvar err = new Error('Unhandled \"error\" event. (' + er + ')');\n\t\t\t\terr['context'] = er;\n\t\t\t\tthrow err;\n\t\t\t}\n\t\t}\n\n\t\thandler = events[type];\n\n\t\tif (!handler) return false;\n\n\t\tvar isFn = typeof handler === 'function';\n\t\tlen = arguments.length;\n\t\tswitch (len) {\n\t\t\t// fast cases\n\t\t\tcase 1:\n\t\t\t\temitNone(handler, isFn, this);\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\temitOne(handler, isFn, this, arguments[1]);\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\temitTwo(handler, isFn, this, arguments[1], arguments[2]);\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\temitThree(handler, isFn, this, arguments[1], arguments[2], arguments[3]);\n\t\t\t\tbreak;\n\t\t\t// slower\n\t\t\tdefault:\n\t\t\t\targs = new Array(len - 1);\n\t\t\t\tfor (i = 1; i < len; i++) args[i - 1] = arguments[i];\n\t\t\t\temitMany(handler, isFn, this, args);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\ton(type: string, listener: Function) {\n\t\treturn _addListener(this, type, listener);\n\t}\n\n\tonce(type, listener) {\n\t\tif (typeof listener !== 'function') throw new TypeError('\"listener\" argument must be a function');\n\t\tthis.on(type, _onceWrap(this, type, listener));\n\t\treturn this;\n\t}\n\n\toff(type, listener) {\n\t\treturn _removeListener.call(this, type, listener);\n\t}\n\n\tremoveAllListeners(type) {\n\t\tvar listeners, events, i;\n\n\t\tevents = this._events;\n\t\tif (!events) return this;\n\n\t\t// not listening for off, no need to emit\n\t\tif (!events.off) {\n\t\t\tif (arguments.length === 0) {\n\t\t\t\tthis._events = objectCreate(null);\n\t\t\t\tthis._eventsCount = 0;\n\t\t\t} else if (events[type]) {\n\t\t\t\tif (--this._eventsCount === 0) this._events = objectCreate(null);\n\t\t\t\telse delete events[type];\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\n\t\t// emit off for all listeners on all events\n\t\tif (arguments.length === 0) {\n\t\t\tvar keys = objectKeys(events);\n\t\t\tvar key;\n\t\t\tfor (i = 0; i < keys.length; ++i) {\n\t\t\t\tkey = keys[i];\n\t\t\t\tif (key === 'off') continue;\n\t\t\t\tthis.removeAllListeners(key);\n\t\t\t}\n\t\t\tthis.removeAllListeners('off');\n\t\t\tthis._events = objectCreate(null);\n\t\t\tthis._eventsCount = 0;\n\t\t\treturn this;\n\t\t}\n\n\t\tlisteners = events[type];\n\n\t\tif (typeof listeners === 'function') {\n\t\t\tthis.off(type, listeners);\n\t\t} else if (listeners) {\n\t\t\t// LIFO order\n\t\t\tfor (i = listeners.length - 1; i >= 0; i--) {\n\t\t\t\tthis.off(type, listeners[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tlisteners(type) {\n\t\treturn _listeners(this, type, true);\n\t}\n\n\trawListeners(type) {\n\t\treturn _listeners(this, type, false);\n\t}\n\n\tlistenerCount() {\n\t\treturn EventEmitter.listenerCount.apply(this, arguments);\n\t}\n}\n\nlet hasDefineProperty;\ntry {\n\tvar o = {};\n\tif (Object.defineProperty) Object.defineProperty(o, 'x', { value: 0 });\n\thasDefineProperty = o['x'] === 0;\n} catch (err) {\n\thasDefineProperty = false;\n}\nif (hasDefineProperty) {\n\tObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n\t\tenumerable: true,\n\t\tget: function () {\n\t\t\treturn defaultMaxListeners;\n\t\t},\n\t\tset: function (arg) {\n\t\t\t// check whether the input is a positive number (whose value is zero or\n\t\t\t// greater and not a NaN).\n\t\t\tif (typeof arg !== 'number' || arg < 0 || arg !== arg)\n\t\t\t\tthrow new TypeError('\"defaultMaxListeners\" must be a positive number');\n\t\t\tdefaultMaxListeners = arg;\n\t\t}\n\t});\n} else {\n\tEventEmitter.defaultMaxListeners = defaultMaxListeners;\n}\n\nfunction $getMaxListeners(that) {\n\tif (that._maxListeners === undefined) return EventEmitter.defaultMaxListeners;\n\treturn that._maxListeners;\n}\n\n// These standalone emit* functions are used to optimize calling of event\n// handlers for fast cases because emit() itself often has a variable number of\n// arguments and can be deoptimized because of that. These functions always have\n// the same number of arguments and thus do not get deoptimized, so the code\n// inside them can execute faster.\nfunction emitNone(handler, isFn, self) {\n\tif (isFn) handler.call(self);\n\telse {\n\t\tvar len = handler.length;\n\t\tvar listeners = arrayClone(handler, len);\n\t\tfor (var i = 0; i < len; ++i) {\n\t\t\ttry {\n\t\t\t\tlisteners[i].call(self);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction emitOne(handler, isFn, self, arg1) {\n\tif (isFn) handler.call(self, arg1);\n\telse {\n\t\tvar len = handler.length;\n\t\tvar listeners = arrayClone(handler, len);\n\t\tfor (var i = 0; i < len; ++i) {\n\t\t\ttry {\n\t\t\t\tlisteners[i].call(self, arg1);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction emitTwo(handler, isFn, self, arg1, arg2) {\n\tif (isFn) handler.call(self, arg1, arg2);\n\telse {\n\t\tvar len = handler.length;\n\t\tvar listeners = arrayClone(handler, len);\n\t\tfor (var i = 0; i < len; ++i) {\n\t\t\ttry {\n\t\t\t\tlisteners[i].call(self, arg1, arg2);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction emitThree(handler, isFn, self, arg1, arg2, arg3) {\n\tif (isFn) handler.call(self, arg1, arg2, arg3);\n\telse {\n\t\tvar len = handler.length;\n\t\tvar listeners = arrayClone(handler, len);\n\t\tfor (var i = 0; i < len; ++i) {\n\t\t\ttry {\n\t\t\t\tlisteners[i].call(self, arg1, arg2, arg3);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction emitMany(handler, isFn, self, args) {\n\tif (isFn) handler.apply(self, args);\n\telse {\n\t\tvar len = handler.length;\n\t\tvar listeners = arrayClone(handler, len);\n\t\tfor (var i = 0; i < len; ++i) {\n\t\t\ttry {\n\t\t\t\tlisteners[i].apply(self, args);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction _addListener(target: EventEmitter, type, listener: Function) {\n\tvar m;\n\tvar events;\n\tvar existing;\n\n\tif (typeof listener !== 'function') throw new TypeError('\"listener\" argument must be a function');\n\n\tevents = target._events;\n\tif (!events) {\n\t\tevents = target._events = objectCreate(null);\n\t\ttarget._eventsCount = 0;\n\t} else {\n\t\t// To avoid recursion in the case that type === \"newListener\"! Before\n\t\t// adding it to the listeners, first emit \"newListener\".\n\t\tif (events.newListener) {\n\t\t\ttarget.emit('newListener', type, listener['listener'] ? listener['listener'] : listener);\n\n\t\t\t// Re-assign `events` because a newListener handler could have caused the\n\t\t\t// this._events to be assigned to a new object\n\t\t\tevents = target._events;\n\t\t}\n\t\texisting = events[type];\n\t}\n\n\tif (!existing) {\n\t\t// Optimize the case of one listener. Don't need the extra array object.\n\t\texisting = events[type] = listener;\n\t\t++target._eventsCount;\n\t} else {\n\t\tif (typeof existing === 'function') {\n\t\t\t// Adding the second element, need to change to array.\n\t\t\texisting = events[type] = [existing, listener];\n\t\t} else {\n\t\t\texisting.push(listener);\n\t\t}\n\n\t\t// Check for listener leak\n\t\tif (!existing.warned) {\n\t\t\tm = $getMaxListeners(target);\n\t\t\tif (m && m > 0 && existing.length > m) {\n\t\t\t\texisting.warned = true;\n\n\t\t\t\tclass CustomError extends Error {\n\t\t\t\t\temitter: any;\n\t\t\t\t\ttype: string;\n\t\t\t\t\tcount: number;\n\t\t\t\t}\n\t\t\t\tlet w: CustomError = new CustomError(\n\t\t\t\t\t'Possible Dispatcher memory leak detected. ' +\n\t\t\t\t\t\texisting.length +\n\t\t\t\t\t\t' \"' +\n\t\t\t\t\t\tString(type) +\n\t\t\t\t\t\t'\" listeners ' +\n\t\t\t\t\t\t'added. Use emitter.setMaxListeners() to ' +\n\t\t\t\t\t\t'increase limit.'\n\t\t\t\t);\n\t\t\t\tw.name = 'MaxListenersExceededWarning';\n\t\t\t\tw.emitter = target;\n\t\t\t\tw.type = type;\n\t\t\t\tw.count = existing.length;\n\n\t\t\t\tif (typeof console === 'object' && console.warn) {\n\t\t\t\t\tconsole.warn('%s: %s', w.name, w.message);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn target;\n}\n\nfunction _removeListener(type, listener) {\n\tvar list, events, position, i, originalListener;\n\n\tif (typeof listener !== 'function') throw new TypeError('\"listener\" argument must be a function');\n\n\tevents = this._events;\n\tif (!events) return this;\n\n\tlist = events[type];\n\tif (!list) return this;\n\n\tif (list === listener || list.listener === listener) {\n\t\tif (--this._eventsCount === 0) this._events = objectCreate(null);\n\t\telse {\n\t\t\tdelete events[type];\n\t\t\tif (events.off) this.emit('off', type, list.listener || listener);\n\t\t}\n\t} else if (typeof list !== 'function') {\n\t\tposition = -1;\n\n\t\tfor (i = list.length - 1; i >= 0; i--) {\n\t\t\tif (list[i] === listener || list[i].listener === listener) {\n\t\t\t\toriginalListener = list[i].listener;\n\t\t\t\tposition = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (position < 0) return this;\n\n\t\tif (position === 0) list.shift();\n\t\telse spliceOne(list, position);\n\n\t\tif (list.length === 1) events[type] = list[0];\n\n\t\tif (events.off) this.emit('off', type, originalListener || listener);\n\t}\n\n\treturn this;\n}\n\nfunction onceWrapper() {\n\tif (!this.fired) {\n\t\tthis.target.off(this.type, this.wrapFn);\n\t\tthis.fired = true;\n\t\tswitch (arguments.length) {\n\t\t\tcase 0:\n\t\t\t\treturn this.listener.call(this.target);\n\t\t\tcase 1:\n\t\t\t\treturn this.listener.call(this.target, arguments[0]);\n\t\t\tcase 2:\n\t\t\t\treturn this.listener.call(this.target, arguments[0], arguments[1]);\n\t\t\tcase 3:\n\t\t\t\treturn this.listener.call(this.target, arguments[0], arguments[1], arguments[2]);\n\t\t\tdefault:\n\t\t\t\tvar args = new Array(arguments.length);\n\t\t\t\tfor (var i = 0; i < args.length; ++i) args[i] = arguments[i];\n\t\t\t\tthis.listener.apply(this.target, args);\n\t\t}\n\t}\n}\n\nfunction _onceWrap(target, type, listener) {\n\tvar state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n\tvar wrapped = bind.call(onceWrapper, state);\n\twrapped.listener = listener;\n\tstate.wrapFn = wrapped;\n\treturn wrapped;\n}\n\nfunction _listeners(target, type, unwrap) {\n\tvar events = target._events;\n\n\tif (!events) return [];\n\n\tvar evlistener = events[type];\n\tif (!evlistener) return [];\n\n\tif (typeof evlistener === 'function') return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n\treturn unwrap ? unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nfunction listenerCount(type) {\n\tvar events = this._events;\n\n\tif (events) {\n\t\tvar evlistener = events[type];\n\n\t\tif (typeof evlistener === 'function') {\n\t\t\treturn 1;\n\t\t} else if (evlistener) {\n\t\t\treturn evlistener.length;\n\t\t}\n\t}\n\n\treturn 0;\n}\n\n// About 1.5x faster than the two-arg version of Array#splice().\nfunction spliceOne(list, index) {\n\tfor (var i = index, k = i + 1, n = list.length; k < n; i += 1, k += 1) list[i] = list[k];\n\tlist.pop();\n}\n\nfunction arrayClone(arr, n) {\n\tvar copy = new Array(n);\n\tfor (var i = 0; i < n; ++i) copy[i] = arr[i];\n\treturn copy;\n}\n\nfunction unwrapListeners(arr) {\n\tvar ret = new Array(arr.length);\n\tfor (var i = 0; i < ret.length; ++i) {\n\t\tret[i] = arr[i].listener || arr[i];\n\t}\n\treturn ret;\n}\n\nfunction objectCreatePolyfill(proto) {\n\tvar F = function () {};\n\tF.prototype = proto;\n\treturn new F();\n}\n\nfunction objectKeysPolyfill(obj) {\n\tvar keys = [];\n\tfor (var k in obj)\n\t\tif (Object.prototype.hasOwnProperty.call(obj, k)) {\n\t\t\tkeys.push(k);\n\t\t}\n\treturn k;\n}\n\nfunction functionBindPolyfill(context) {\n\tvar fn = this;\n\treturn function () {\n\t\treturn fn.apply(context, arguments);\n\t};\n}\n","import EventEmitter from '../util/event-emitter';\n\nexport class Context extends EventEmitter {}\n\nexport type PushConf = Partial<{\n\tdone: boolean;\n\tstubTime: number;\n\toffsetPos: number; // Represents the start byte of the pushed data relative to the entire file\n}>;\n\nexport type GlobalOptions = Partial<{\n\tdebug: boolean;\n\tdecodeCodec: boolean;\n\tconfig: PushConf;\n}>;\n\nexport interface IDemux {\n\t/**\n\t * Pipe the arrayBuffer to the demuxer.\n\t * @param buf\n\t * @param conf\n\t */\n\tpush(buf: ArrayBuffer | Uint8Array, conf: PushConf): void;\n\n\treset(): void;\n\n\tdestroy(): void;\n}\n","/**\n * @file: is.js, created at Monday, 23rd December 2019 3:47:23 pm\n * @copyright Copyright (c) 2020\n * @author gem <gems.xu@gmail.com>\n */\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = Object.prototype.toString;\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nexport function isObjectLike(value: any): boolean {\n\treturn !!value && typeof value == 'object';\n}\n\nexport function isEmptyObject(obj: object): boolean {\n\tfor (var prop in obj) {\n\t\tif (obj.hasOwnProperty(prop)) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn JSON.stringify(obj) === JSON.stringify({});\n}\n\n/**\n * @param url\n */\nexport function isHttps(url?: string): boolean {\n\treturn /^https/gi.test(url || window.location.protocol);\n}\n\n/**\n * @param num\n */\nexport function isNumber(num: any): boolean {\n\treturn typeof num === 'number' && !isNaN(num);\n}\n\n/**\n * @param value\n */\nexport function isArrayBuffer(value: any): boolean {\n\treturn isObjectLike(value) && objectToString.call(value).toLowerCase() === '[object arraybuffer]';\n}\n\n/**\n * @param value\n */\nexport function isUint8Array(value: any): boolean {\n\treturn isObjectLike(value) && objectToString.call(value).toLowerCase() === '[object uint8array]';\n}\n","/**\n * @file: cache-buffer.js, created at Monday, 23rd December 2019 3:47:23 pm\n * @copyright Copyright (c) 2020\n * @author gem <gems.xu@gmail.com>\n */\n\nimport { isNumber } from './is';\n\n/**\n * Cache Buffer util.\n * It's applicable for streaming data cutting and retaining the data,\n * the algorithm minimizes memory application as much as possible.\n */\n\nexport default class CacheBuffer {\n\tget byteLength(): number {\n\t\tif (!isNumber(this.byteLength_)) {\n\t\t\tlet len = 0;\n\n\t\t\tfor (let i = 0, item: Uint8Array; i < this.list_.length; i++) {\n\t\t\t\titem = this.list_[i];\n\t\t\t\tlen += item.byteLength;\n\t\t\t}\n\t\t\tthis.byteLength_ = len;\n\t\t}\n\n\t\treturn this.byteLength_;\n\t}\n\n\t/**\n\t * maybe return new allocated memory or original memory\n\t */\n\tget bytes(): Uint8Array | null {\n\t\tconst { bufferList } = this;\n\t\tlet bytes = null;\n\n\t\tif (bufferList.length > 0) {\n\t\t\tif (bufferList.length === 0) {\n\t\t\t\tbytes = bufferList[0];\n\t\t\t} else {\n\t\t\t\tbytes = this.toNewBytes();\n\t\t\t}\n\t\t}\n\n\t\treturn bytes;\n\t}\n\n\tget empty() {\n\t\treturn this.list_.length === 0;\n\t}\n\n\tget bufferList() {\n\t\treturn this.list_;\n\t}\n\n\t/**\n\t * Used to cache calculations, reduce the number of CPU calculations.\n\t * When internal data changes, the value needs to be cleared and recalculated.\n\t */\n\tprivate byteLength_: number | null;\n\n\tprivate list_: Array<Uint8Array> = [];\n\n\tclear() {\n\t\tlet len = this.list_.length;\n\t\tif (len > 0) {\n\t\t\tthis.list_.splice(0, len);\n\t\t}\n\t\tthis.byteLength_ = null;\n\t}\n\n\ttoNewBytes(): Uint8Array | null {\n\t\tlet bytes = null;\n\t\tlet tryCount: number = 0;\n\t\tlet maxTryCount: number = 50;\n\n\t\t// The following retry strategies are provided for failed memory applications\n\t\t// In terms of a better strategy, a failed memory application retry should be\n\t\t// an asynchronous process, which does not return until the application succeeds.\n\t\t// But the original design of the library is synchronous.\n\t\twhile (bytes === null) {\n\t\t\ttry {\n\t\t\t\ttryCount++;\n\t\t\t\tbytes = new Uint8Array(this.byteLength);\n\t\t\t} catch (e) {\n\t\t\t\tif (tryCount > maxTryCount) {\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (let i = 0, offset = 0; i < this.list_.length; i++) {\n\t\t\tlet payload = this.list_[i];\n\n\t\t\tbytes.set(payload, offset);\n\t\t\toffset += payload.byteLength;\n\t\t}\n\n\t\treturn bytes;\n\t}\n\n\tappend(newBuffer: Uint8Array | CacheBuffer): void {\n\t\tif (newBuffer instanceof CacheBuffer) {\n\t\t\tthis.list_ = this.list_.concat(newBuffer.bufferList);\n\t\t} else {\n\t\t\tthis.list_.push(newBuffer);\n\t\t}\n\n\t\tthis.byteLength_ = null;\n\t}\n\n\t/**\n\t * This function cuts a complete TypedArray from CacheBuffer and retains the remainder of CacheBuffer.\n\t * The following points should be noted when using this function:\n\t * 1. If the cut needs to return the cut-out part, the cut length should be as small as possible to reduce the errors in memory application.\n\t * 2. If the cutting is only to preserve the remaining parts, the cutting size is within the total number of bytes, without considering memory applications.\n\t * @param {number} fixedLength\n\t * @param {boolean} [needCutResult] - If not, just retain the remaining parts after cutting.\n\t */\n\tcut(fixedLength: number, needCutResult: boolean = true): Uint8Array {\n\t\tlet chunk = null;\n\n\t\tif (fixedLength > 0 && !this.empty) {\n\t\t\tlet list = this.list_;\n\n\t\t\tlet offset = 0;\n\t\t\tlet loopIndex = 0;\n\n\t\t\twhile (list.length > 0) {\n\t\t\t\tlet cur = list.shift();\n\n\t\t\t\tif (loopIndex === 0) {\n\t\t\t\t\tif (cur.byteLength >= fixedLength) {\n\t\t\t\t\t\tif (needCutResult) {\n\t\t\t\t\t\t\t// Here is the key point for optimize memory alloc\n\t\t\t\t\t\t\tchunk = cur.subarray(0, fixedLength);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (cur.byteLength > fixedLength) {\n\t\t\t\t\t\t\tcur = cur.subarray(fixedLength);\n\t\t\t\t\t\t\tlist.unshift(cur);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (needCutResult) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tchunk = new Uint8Array(fixedLength);\n\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\tthrow `alloc_memory_error@ cache buffer: ${fixedLength} ${e.message}`;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tchunk.set(cur, 0);\n\t\t\t\t\t\t}\n\t\t\t\t\t\toffset += cur.byteLength;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tlet subLen = fixedLength - offset;\n\n\t\t\t\t\tif (cur.byteLength >= subLen) {\n\t\t\t\t\t\tif (needCutResult) {\n\t\t\t\t\t\t\tchunk.set(cur.subarray(0, subLen), offset);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcur = cur.subarray(subLen);\n\n\t\t\t\t\t\tif (cur.byteLength > 0) {\n\t\t\t\t\t\t\tlist.unshift(cur);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (needCutResult) {\n\t\t\t\t\t\t\tchunk.set(cur, offset);\n\t\t\t\t\t\t}\n\t\t\t\t\t\toffset += cur.byteLength;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tloopIndex++;\n\t\t\t}\n\n\t\t\tthis.byteLength_ = null;\n\t\t}\n\n\t\treturn chunk;\n\t}\n}\n","/**\n * @fileOverview A simple multimap template.\n */\n\ninterface MapData {\n\t[index: string]: Array<any>;\n}\n\nexport default class MultiMap {\n\tprivate map_: MapData;\n\n\tconstructor() {\n\t\tthis.map_ = {};\n\t}\n\n\t/**\n\t * Add a key, value pair to the map.\n\t * @param key\n\t * @param value\n\t */\n\tpush(key: string, value: any) {\n\t\tif (this.map_.hasOwnProperty(key)) {\n\t\t\tthis.map_[key].push(value);\n\t\t} else {\n\t\t\tthis.map_[key] = [value];\n\t\t}\n\t}\n\n\t/**\n\t * Get a list of values by key.\n\t * @param key\n\t */\n\tget(key: string): Array<any> {\n\t\tlet list = this.map_[key];\n\t\t// slice() clones the list so that it and the map can each be modified\n\t\t// without affecting the other.\n\t\treturn list ? list.slice() : null;\n\t}\n\n\t/**\n\t * Get a list of all values.\n\t */\n\tgetAll(): Array<any> {\n\t\tlet list = [];\n\t\tfor (let key in this.map_) {\n\t\t\tlist.push.apply(list, this.map_[key]);\n\t\t}\n\t\treturn list;\n\t}\n\n\t/**\n\t * Remove a specific value, if it exists.\n\t * @param key\n\t * @param value\n\t */\n\tremove(key: string, value: any): void {\n\t\tlet list = this.map_[key];\n\t\tif (list) {\n\t\t\tfor (let i = 0; i < list.length; ++i) {\n\t\t\t\tif (list[i] == value) {\n\t\t\t\t\tlist.splice(i, 1);\n\t\t\t\t\t--i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Clear all keys and values from the multimap.\n\t */\n\tclear(): void {\n\t\tthis.map_ = {};\n\t}\n\n\t/**\n\t * @param callback\n\t */\n\tforEach(callback: Function): void {\n\t\tfor (let key in this.map_) {\n\t\t\tcallback(key, this.map_[key]);\n\t\t}\n\t}\n}\n","import MultiMap from './multi-map';\n\n/**\n * Creates a new Binding_ and attaches the event listener to the event target.\n */\nclass Binding_ {\n\ttarget: any;\n\ttype: string;\n\tlistener: Function;\n\n\t/**\n\t * @param target - The event target.\n\t * @param type - The event type.\n\t * @param listener - The event listener.\n\t */\n\tconstructor(target: any, type: string, listener: Function) {\n\t\tthis.target = target;\n\t\tthis.type = type;\n\t\tthis.listener = listener;\n\n\t\tif (this.target.addEventListener) {\n\t\t\tthis.target.addEventListener(type, listener, false);\n\t\t} else if (this.target.on) {\n\t\t\tthis.target.on(type, listener, false);\n\t\t}\n\t}\n\n\t/**\n\t * Detaches the event listener from the event target.\n\t * This does nothing if the event listener is already detached.\n\t */\n\toff() {\n\t\tif (this.target.removeEventListener) {\n\t\t\tthis.target.removeEventListener(this.type, this.listener, false);\n\t\t} else if (this.target.off) {\n\t\t\tthis.target.off(this.type, this.listener, false);\n\t\t}\n\n\t\tthis.target = null;\n\t\tthis.listener = null;\n\t}\n}\n\n/**\n * Creates a new EventManager.\n * An EventManager maintains a collection of \"event bindings\" between event targets and event listeners.\n */\nexport default class EventManager {\n\tprivate bindingMap_: MultiMap;\n\t// static Binding_: Binding;\n\n\tconstructor() {\n\t\t/**\n\t\t * Maps an event type to an array of event bindings.\n\t\t */\n\t\tthis.bindingMap_ = new MultiMap();\n\t}\n\n\t/**\n\t * Detaches all event listeners.\n\t * @override\n\t */\n\tdestroy(): void {\n\t\tthis.removeAll();\n\t\tthis.bindingMap_ = null;\n\t}\n\n\t/**\n\t * Attaches an event listener to an event target.\n\t * @param target - The event target.\n\t * @param type  - The event type.\n\t * @param listener  - The event listener.\n\t */\n\ton(target: any, type: string, listener: Function): EventManager {\n\t\tif (!this.bindingMap_) return;\n\n\t\tlet binding = new Binding_(target, type, listener);\n\t\tthis.bindingMap_.push(type, binding);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Attaches an event listener to an event target.\n\t * The listener will be removed when the first instance of the event is fired.\n\t * @param {EventTarget} target The event target.\n\t * @param {string} type The event type.\n\t * @param {function} listener The event listener.\n\t */\n\tonce(target: any, type: string, listener: Function) {\n\t\t// Install a shim listener that will stop listening after the first event.\n\t\tthis.on(\n\t\t\ttarget,\n\t\t\ttype,\n\t\t\tfunction (event: any) {\n\t\t\t\t// Stop listening to this event.\n\t\t\t\tthis.off(target, type);\n\t\t\t\t// Call the original listener.\n\t\t\t\tlistener(event);\n\t\t\t}.bind(this)\n\t\t);\n\t}\n\n\t/**\n\t * Detaches an event listener from an event target.\n\t * @param {EventTarget} target The event target.\n\t * @param {string} type The event type.\n\t */\n\toff(target: any, type: string): void {\n\t\tif (!this.bindingMap_) return;\n\n\t\tlet list = this.bindingMap_.get(type) || [];\n\n\t\tfor (let i = 0; i < list.length; ++i) {\n\t\t\tlet binding = list[i];\n\n\t\t\tif (binding.target == target) {\n\t\t\t\tbinding.off();\n\t\t\t\tthis.bindingMap_.remove(type, binding);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Detaches all event listeners from all targets.\n\t */\n\tremoveAll(): void {\n\t\tif (!this.bindingMap_) return;\n\n\t\tlet list = this.bindingMap_.getAll();\n\n\t\tfor (let i = 0; i < list.length; ++i) {\n\t\t\tlist[i].off();\n\t\t}\n\n\t\tthis.bindingMap_.clear();\n\t}\n}\n\n// EventManager.Binding_ = Binding;\n","/**\n * @file: global.js, created at Monday, 23rd December 2019 3:47:23 pm\n * @copyright Copyright (c) 2020\n * @author gem <gems.xu@gmail.com>\n */\n\n/**\n * @description provide global scope.\n */\nlet global: any;\n\n// see https://stackoverflow.com/a/11237259/589493\nif (typeof window === 'undefined') {\n\t/* eslint-disable-next-line no-undef */\n\tglobal = self;\n} else {\n\tglobal = window;\n}\n\nexport default global;\n","/**\n * @file: logger.js, created at Monday, 23rd December 2019 3:47:23 pm\n * @copyright Copyright (c) 2020\n * @author gem <gems.xu@gmail.com>\n */\n\n/**\n * utils - logger\n */\n/* global WorkerGlobalScope */\nimport global from './global';\nimport EventEmitter from './event-emitter';\n\nlet console = global.console;\nconst isWorker =\n\ttypeof WorkerGlobalScope !== 'undefined' &&\n\tself instanceof WorkerGlobalScope &&\n\ttypeof importScripts != 'undefined';\nconst prefix = '>>>';\n\nclass Logger extends EventEmitter {\n\tprivate MSG_NAME: string;\n\tprivate _enable: boolean;\n\n\tget enable() {\n\t\treturn this._enable;\n\t}\n\n\tset enable(value: boolean) {\n\t\tthis._enable = value;\n\n\t\tthis.MSG_NAME = '__log__';\n\t}\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis._enable = false;\n\t}\n\n\tlog(...restArgs: any) {\n\t\tif (isWorker) {\n\t\t\tlogger.emit(this.MSG_NAME, 'log', [...arguments].join(''));\n\t\t} else {\n\t\t\tif (this._enable) {\n\t\t\t\tconsole.log.call(console, prefix, ...arguments);\n\t\t\t}\n\t\t}\n\t}\n\n\tdebug(...restArgs: any) {\n\t\tif (isWorker) {\n\t\t\tlogger.emit(this.MSG_NAME, 'debug', [...arguments].join(''));\n\t\t} else {\n\t\t\tif (this._enable && console.debug) {\n\t\t\t\tconsole.debug.call(console, prefix, ...arguments);\n\t\t\t}\n\t\t}\n\t}\n\n\tassert(...restArgs: any) {\n\t\tif (this._enable && console.assert) {\n\t\t\tlet condition = arguments[0];\n\t\t\tlet sliceArgs = Array.prototype.slice.call(arguments, 1);\n\t\t\tsliceArgs.unshift(prefix);\n\n\t\t\tconsole.assert.call(console, condition, ...sliceArgs);\n\t\t}\n\t}\n\n\twarn(...restArgs: any) {\n\t\tif (isWorker) {\n\t\t\tlogger.emit(this.MSG_NAME, 'warn', [...arguments].join(''));\n\t\t} else {\n\t\t\tif (this._enable) {\n\t\t\t\tconsole.warn.call(console, prefix, ...arguments);\n\t\t\t}\n\t\t}\n\t}\n\n\terror(...restArgs: any) {\n\t\tif (isWorker) {\n\t\t\tlogger.emit(this.MSG_NAME, 'error', [...arguments].join(''));\n\t\t} else {\n\t\t\tif (this._enable) {\n\t\t\t\tconsole.error.call(console, prefix, ...arguments);\n\t\t\t}\n\t\t}\n\t}\n}\n\nlet logger = new Logger();\n\n/**\n * @param {Object} obj - custom logger\n */\nexport function setLogger(obj) {\n\tconsole = obj;\n}\n\nexport function getLogger() {\n\treturn logger;\n}\n\nexport default logger;\n","/**\n * @file: stream.js, created at Monday, 23rd December 2019 3:47:23 pm\n * @copyright Copyright (c) 2020\n * @author gem <gems.xu@gmail.com>\n */\n\n/**\n * simple stream implementation.\n */\n\nimport { PushConf } from '../types/globals';\nimport EventEmitter from './event-emitter';\n\nclass Stream extends EventEmitter {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t/**\n\t * connect to the next pipeline stream.\n\t * @param destination\n\t */\n\tpipe(destination: Stream): Stream {\n\t\tthis.on('reset', function () {\n\t\t\tdestination.reset();\n\t\t});\n\n\t\tthis.on('data', function (data) {\n\t\t\tdestination.push(data);\n\t\t});\n\n\t\tthis.on('done', function (flushSource) {\n\t\t\tdestination.flush(flushSource);\n\t\t});\n\n\t\treturn destination;\n\t}\n\n\t/**\n\t * detaches the next pipeline stream previously attached.\n\t */\n\tunpipe(): Stream {\n\t\tthis.removeAllListeners('reset');\n\t\tthis.removeAllListeners('data');\n\t\tthis.removeAllListeners('done');\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * push data to current pipeline.\n\t * @param data\n\t */\n\tpush(data: any, conf?: PushConf): void {\n\t\tthis.emit('data', data);\n\t}\n\n\t/**\n\t * flush current pipeline.\n\t * @param flushSource\n\t */\n\tflush(flushSource: Stream): void {\n\t\tthis.emit('done', flushSource);\n\t}\n\n\treset(): void {\n\t\tthis.emit('reset');\n\t}\n}\n\nexport default Stream;\n","/**\n * @file: demuxer.js, created at Monday, 23rd December 2019 3:47:23 pm\n * @copyright Copyright (c) 2020\n * @author gem <gems.xu@gmail.com>\n */\nimport { Events } from './enum/events';\nimport { Context, GlobalOptions, IDemux, PushConf } from './types/globals';\nimport CacheBuffer from './util/cache-buffer';\nimport EventManager from './util/event-manager';\nimport { isArrayBuffer, isUint8Array } from './util/is';\nimport logger from './util/logger';\nimport Stream from './util/stream';\n\nexport default abstract class DemuxFacade extends Stream implements IDemux {\n\treadonly endStream?: Stream;\n\tprotected eventManager_: EventManager;\n\tprotected ctx_: Context;\n\tprotected options_: GlobalOptions;\n\tprotected cache_buffer_: CacheBuffer;\n\n\tprotected listenEndStream_(): void {\n\t\tthis.eventManager_ = new EventManager();\n\n\t\tthis.eventManager_\n\t\t\t.on(this.endStream, 'data', (data) => {\n\t\t\t\tthis.emit(Events.DEMUX_DATA, data);\n\t\t\t})\n\t\t\t.on(this.endStream, 'done', (data) => {\n\t\t\t\tthis.emit(Events.DONE, data);\n\t\t\t})\n\t\t\t.on(this.ctx_, 'error', (data) => {\n\t\t\t\tthis.emit(Events.ERROR, data);\n\t\t\t});\n\t}\n\n\tconstructor(options: GlobalOptions = {}) {\n\t\tsuper();\n\n\t\tif (options.debug) {\n\t\t\tlogger.enable = true;\n\t\t}\n\n\t\tthis.ctx_ = new Context();\n\t\tthis.options_ = options;\n\t\tthis.cache_buffer_ = new CacheBuffer();\n\t}\n\n\t/**\n\t * Pipe the arrayBuffer to the demuxer.\n\t * @param buf\n\t * @param conf\n\t */\n\tabstract push(buf: ArrayBuffer | Uint8Array, conf: PushConf): void;\n\n\t/**\n\t * transfer data to Uint8Array\n\t * @param buf\n\t */\n\tprotected constraintPushData_(buf: ArrayBuffer | Uint8Array): Uint8Array | null {\n\t\tlet newBuf = null;\n\t\tif (!isArrayBuffer(buf) && !isUint8Array(buf)) {\n\t\t\treturn newBuf;\n\t\t}\n\n\t\tif (isArrayBuffer(buf)) {\n\t\t\tnewBuf = new Uint8Array(buf);\n\t\t}\n\n\t\treturn newBuf;\n\t}\n\n\treset(): void {}\n\n\tdestroy(): void {\n\t\tthis.unpipe();\n\t\tthis.endStream.unpipe();\n\n\t\tthis.eventManager_.removeAll();\n\t}\n}\n","/**\n * @file: mp4-inspector.js, created at Monday, 23rd December 2019 3:47:23 pm\n * @copyright Copyright (c) 2020\n * @author gem <gems.xu@gmail.com>\n */\n\n/* eslint-disable */\nlet /**\n\t * Returns the string representation of an ASCII encoded four byte buffer.\n\t * @param buffer - a four-byte buffer to translate\n\t * @return the corresponding string\n\t */\n\tparseType = function (buffer: Uint8Array): string {\n\t\tlet result = '';\n\t\tresult += String.fromCharCode(buffer[0]);\n\t\tresult += String.fromCharCode(buffer[1]);\n\t\tresult += String.fromCharCode(buffer[2]);\n\t\tresult += String.fromCharCode(buffer[3]);\n\t\treturn result;\n\t},\n\tparseMp4Date = function (seconds: number): Date {\n\t\treturn new Date(seconds * 1000 - 2082844800000);\n\t},\n\tparseSampleFlags = function (flags: Uint8Array) {\n\t\treturn {\n\t\t\tisLeading: (flags[0] & 0x0c) >>> 2,\n\t\t\tdependsOn: flags[0] & 0x03,\n\t\t\tisDependedOn: (flags[1] & 0xc0) >>> 6,\n\t\t\thasRedundancy: (flags[1] & 0x30) >>> 4,\n\t\t\tpaddingValue: (flags[1] & 0x0e) >>> 1,\n\t\t\tisNonSyncSample: flags[1] & 0x01,\n\t\t\tdegradationPriority: (flags[2] << 8) | flags[3]\n\t\t};\n\t},\n\tnalParse = function (avcStream) {\n\t\tlet avcView = new DataView(avcStream.buffer, avcStream.byteOffset, avcStream.byteLength),\n\t\t\tresult = [],\n\t\t\ti,\n\t\t\tlength;\n\t\tfor (i = 0; i < avcStream.length; i += length) {\n\t\t\tlength = avcView.getUint32(i);\n\t\t\ti += 4;\n\t\t\tswitch (avcStream[i] & 0x1f) {\n\t\t\t\tcase 0x01:\n\t\t\t\t\tresult.push('NDR');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x05:\n\t\t\t\t\tresult.push('IDR');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x06:\n\t\t\t\t\tresult.push('SEI');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x07:\n\t\t\t\t\tresult.push('SPS');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x08:\n\t\t\t\t\tresult.push('PPS');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 0x09:\n\t\t\t\t\tresult.push('AUD');\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tresult.push(avcStream[i] & 0x1f);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t},\n\t// registry of handlers for individual mp4 box types\n\tparse = {\n\t\t// codingname, not a first-class box type. stsd entries share the\n\t\t// same format as real boxes so the parsing infrastructure can be\n\t\t// shared\n\t\tavc1: function (data) {\n\t\t\tlet view = new DataView(data.buffer, data.byteOffset, data.byteLength);\n\t\t\treturn {\n\t\t\t\tdataReferenceIndex: view.getUint16(6),\n\t\t\t\twidth: view.getUint16(24),\n\t\t\t\theight: view.getUint16(26),\n\t\t\t\thorizresolution: view.getUint16(28) + view.getUint16(30) / 16,\n\t\t\t\tvertresolution: view.getUint16(32) + view.getUint16(34) / 16,\n\t\t\t\tframeCount: view.getUint16(40),\n\t\t\t\tdepth: view.getUint16(74),\n\t\t\t\tconfig: mp4toJSON(data.subarray(78, data.byteLength))\n\t\t\t};\n\t\t},\n\t\tavcC: function (data) {\n\t\t\tlet view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n\t\t\t\tresult = {\n\t\t\t\t\tconfigurationVersion: data[0],\n\t\t\t\t\tavcProfileIndication: data[1],\n\t\t\t\t\tprofileCompatibility: data[2],\n\t\t\t\t\tavcLevelIndication: data[3],\n\t\t\t\t\tlengthSizeMinusOne: data[4] & 0x03,\n\t\t\t\t\tsps: [],\n\t\t\t\t\tpps: []\n\t\t\t\t},\n\t\t\t\tnumOfSequenceParameterSets = data[5] & 0x1f,\n\t\t\t\tnumOfPictureParameterSets,\n\t\t\t\tnalSize,\n\t\t\t\toffset,\n\t\t\t\ti;\n\n\t\t\t// iterate past any SPSs\n\t\t\toffset = 6;\n\t\t\tfor (i = 0; i < numOfSequenceParameterSets; i++) {\n\t\t\t\tnalSize = view.getUint16(offset);\n\t\t\t\toffset += 2;\n\t\t\t\tresult.sps.push(new Uint8Array(data.subarray(offset, offset + nalSize)));\n\t\t\t\toffset += nalSize;\n\t\t\t}\n\t\t\t// iterate past any PPSs\n\t\t\tnumOfPictureParameterSets = data[offset];\n\t\t\toffset++;\n\t\t\tfor (i = 0; i < numOfPictureParameterSets; i++) {\n\t\t\t\tnalSize = view.getUint16(offset);\n\t\t\t\toffset += 2;\n\t\t\t\tresult.pps.push(new Uint8Array(data.subarray(offset, offset + nalSize)));\n\t\t\t\toffset += nalSize;\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\tbtrt: function (data) {\n\t\t\tlet view = new DataView(data.buffer, data.byteOffset, data.byteLength);\n\t\t\treturn {\n\t\t\t\tbufferSizeDB: view.getUint32(0),\n\t\t\t\tmaxBitrate: view.getUint32(4),\n\t\t\t\tavgBitrate: view.getUint32(8)\n\t\t\t};\n\t\t},\n\t\tesds: function (data) {\n\t\t\tlet view = new DataView(data.buffer, data.byteOffset, data.byteLength);\n\t\t\treturn {\n\t\t\t\tversion: data[0],\n\t\t\t\tflags: new Uint8Array(data.subarray(1, 4)),\n\t\t\t\tesId: (data[6] << 8) | data[7],\n\t\t\t\tstreamPriority: data[8] & 0x1f,\n\t\t\t\tdecoderConfig: {\n\t\t\t\t\tobjectProfileIndication: data[11],\n\t\t\t\t\tstreamType: (data[12] >>> 2) & 0x3f,\n\t\t\t\t\tbufferSize: (data[13] << 16) | (data[14] << 8) | data[15],\n\t\t\t\t\tmaxBitrate: (data[16] << 24) | (data[17] << 16) | (data[18] << 8) | data[19],\n\t\t\t\t\tavgBitrate: (data[20] << 24) | (data[21] << 16) | (data[22] << 8) | data[23],\n\t\t\t\t\tdecoderConfigDescriptor: {\n\t\t\t\t\t\ttag: data[24],\n\t\t\t\t\t\tlength: data[25],\n\t\t\t\t\t\t// audioObjectType: (data[26] >>> 3) & 0x1f,\n\t\t\t\t\t\t// samplingFrequencyIndex: ((data[26] & 0x07) << 1) |\n\t\t\t\t\t\t//   ((data[27] >>> 7) & 0x01),\n\t\t\t\t\t\t// channelConfiguration: (data[27] >>> 3) & 0x0f,\n\t\t\t\t\t\t// FIXME\n\t\t\t\t\t\taudioObjectType: (data[35] >>> 3) & 0x1f,\n\t\t\t\t\t\tsamplingFrequencyIndex: ((data[35] & 0x07) << (8 + (data[36] & 0x80))) >> 7,\n\t\t\t\t\t\tchannelConfiguration: (data[36] & 0x78) >> 3\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tftyp: function (data) {\n\t\t\tlet view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n\t\t\t\tresult = {\n\t\t\t\t\tmajorBrand: parseType(data.subarray(0, 4)),\n\t\t\t\t\tminorVersion: view.getUint32(4),\n\t\t\t\t\tcompatibleBrands: []\n\t\t\t\t},\n\t\t\t\ti = 8;\n\t\t\twhile (i < data.byteLength) {\n\t\t\t\tresult.compatibleBrands.push(parseType(data.subarray(i, i + 4)));\n\t\t\t\ti += 4;\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\tdinf: function (data) {\n\t\t\treturn {\n\t\t\t\tboxes: mp4toJSON(data)\n\t\t\t};\n\t\t},\n\t\tdref: function (data) {\n\t\t\treturn {\n\t\t\t\tversion: data[0],\n\t\t\t\tflags: new Uint8Array(data.subarray(1, 4)),\n\t\t\t\tdataReferences: mp4toJSON(data.subarray(8))\n\t\t\t};\n\t\t},\n\t\thdlr: function (data) {\n\t\t\tlet view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n\t\t\t\tresult = {\n\t\t\t\t\tversion: view.getUint8(0),\n\t\t\t\t\tflags: new Uint8Array(data.subarray(1, 4)),\n\t\t\t\t\thandlerType: parseType(data.subarray(8, 12)),\n\t\t\t\t\tname: ''\n\t\t\t\t},\n\t\t\t\ti = 8;\n\n\t\t\t// parse out the name field\n\t\t\tfor (i = 24; i < data.byteLength; i++) {\n\t\t\t\tif (data[i] === 0x00) {\n\t\t\t\t\t// the name field is null-terminated\n\t\t\t\t\ti++;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tresult.name += String.fromCharCode(data[i]);\n\t\t\t}\n\t\t\t// decode UTF-8 to javascript's internal representation\n\t\t\t// see http://ecmanaut.blogspot.com/2006/07/encoding-decoding-utf8-in-javascript.html\n\t\t\tresult.name = decodeURIComponent(decodeURIComponent(result.name));\n\n\t\t\treturn result;\n\t\t},\n\t\t// mdat: function(data) {\n\t\t// \treturn {\n\t\t// \t\tbyteLength: data.byteLength,\n\t\t// \t\tnals: nalParse(data),\n\t\t// \t\trealData: data\n\t\t// \t};\n\t\t// },\n\t\tmdhd: function (data) {\n\t\t\tlet view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n\t\t\t\ti = 4,\n\t\t\t\tlanguage,\n\t\t\t\tresult = {\n\t\t\t\t\tversion: view.getUint8(0),\n\t\t\t\t\tflags: new Uint8Array(data.subarray(1, 4)),\n\t\t\t\t\tlanguage: '',\n\t\t\t\t\tcreationTime: new Date(),\n\t\t\t\t\tmodificationTime: new Date(),\n\t\t\t\t\ttimescale: 0,\n\t\t\t\t\tduration: 0\n\t\t\t\t};\n\t\t\tif (result.version === 1) {\n\t\t\t\ti += 4;\n\t\t\t\tresult.creationTime = parseMp4Date(view.getUint32(i)); // truncating top 4 bytes\n\t\t\t\ti += 8;\n\t\t\t\tresult.modificationTime = parseMp4Date(view.getUint32(i)); // truncating top 4 bytes\n\t\t\t\ti += 4;\n\t\t\t\tresult.timescale = view.getUint32(i);\n\t\t\t\ti += 8;\n\t\t\t\tresult.duration = view.getUint32(i); // truncating top 4 bytes\n\t\t\t} else {\n\t\t\t\tresult.creationTime = parseMp4Date(view.getUint32(i));\n\t\t\t\ti += 4;\n\t\t\t\tresult.modificationTime = parseMp4Date(view.getUint32(i));\n\t\t\t\ti += 4;\n\t\t\t\tresult.timescale = view.getUint32(i);\n\t\t\t\ti += 4;\n\t\t\t\tresult.duration = view.getUint32(i);\n\t\t\t}\n\t\t\ti += 4;\n\t\t\t// language is stored as an ISO-639-2/T code in an array of three 5-bit fields\n\t\t\t// each field is the packed difference between its ASCII value and 0x60\n\t\t\tlanguage = view.getUint16(i);\n\t\t\tresult.language += String.fromCharCode((language >> 10) + 0x60);\n\t\t\tresult.language += String.fromCharCode(((language & 0x03c0) >> 5) + 0x60);\n\t\t\tresult.language += String.fromCharCode((language & 0x1f) + 0x60);\n\n\t\t\treturn result;\n\t\t},\n\t\tmdia: function (data) {\n\t\t\treturn {\n\t\t\t\tboxes: mp4toJSON(data)\n\t\t\t};\n\t\t},\n\t\tmfhd: function (data) {\n\t\t\treturn {\n\t\t\t\tversion: data[0],\n\t\t\t\tflags: new Uint8Array(data.subarray(1, 4)),\n\t\t\t\tsequenceNumber: (data[4] << 24) | (data[5] << 16) | (data[6] << 8) | data[7]\n\t\t\t};\n\t\t},\n\t\tminf: function (data) {\n\t\t\treturn {\n\t\t\t\tboxes: mp4toJSON(data)\n\t\t\t};\n\t\t},\n\t\t// codingname, not a first-class box type. stsd entries share the\n\t\t// same format as real boxes so the parsing infrastructure can be\n\t\t// shared\n\t\tmp4a: function (data) {\n\t\t\tlet view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n\t\t\t\tresult = {\n\t\t\t\t\t// 6 bytes reserved\n\t\t\t\t\tdataReferenceIndex: view.getUint16(6),\n\t\t\t\t\t// 4 + 4 bytes reserved\n\t\t\t\t\tchannelcount: view.getUint16(16),\n\t\t\t\t\tsamplesize: view.getUint16(18),\n\t\t\t\t\t// 2 bytes pre_defined\n\t\t\t\t\t// 2 bytes reserved\n\t\t\t\t\tsamplerate: view.getUint16(24) + view.getUint16(26) / 65536,\n\t\t\t\t\tstreamDescriptor: undefined\n\t\t\t\t};\n\n\t\t\t// if there are more bytes to process, assume this is an ISO/IEC\n\t\t\t// 14496-14 MP4AudioSampleEntry and parse the ESDBox\n\t\t\tif (data.byteLength > 28) {\n\t\t\t\tresult.streamDescriptor = mp4toJSON(data.subarray(28))[0];\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\tmoof: function (data) {\n\t\t\treturn {\n\t\t\t\tboxes: mp4toJSON(data)\n\t\t\t};\n\t\t},\n\t\tmoov: function (data) {\n\t\t\treturn {\n\t\t\t\tboxes: mp4toJSON(data)\n\t\t\t};\n\t\t},\n\t\tmvex: function (data) {\n\t\t\treturn {\n\t\t\t\tboxes: mp4toJSON(data)\n\t\t\t};\n\t\t},\n\t\tmvhd: function (data) {\n\t\t\tlet view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n\t\t\t\ti = 4,\n\t\t\t\tresult = {\n\t\t\t\t\tversion: view.getUint8(0),\n\t\t\t\t\tflags: new Uint8Array(data.subarray(1, 4)),\n\t\t\t\t\tcreationTime: new Date(),\n\t\t\t\t\tmodificationTime: new Date(),\n\t\t\t\t\ttimescale: 0,\n\t\t\t\t\tduration: 0,\n\t\t\t\t\trate: 0,\n\t\t\t\t\tvolume: 0,\n\t\t\t\t\tmatrix: new Uint32Array(0),\n\t\t\t\t\tnextTrackId: 0\n\t\t\t\t};\n\n\t\t\tif (result.version === 1) {\n\t\t\t\ti += 4;\n\t\t\t\tresult.creationTime = parseMp4Date(view.getUint32(i)); // truncating top 4 bytes\n\t\t\t\ti += 8;\n\t\t\t\tresult.modificationTime = parseMp4Date(view.getUint32(i)); // truncating top 4 bytes\n\t\t\t\ti += 4;\n\t\t\t\tresult.timescale = view.getUint32(i);\n\t\t\t\ti += 8;\n\t\t\t\tresult.duration = view.getUint32(i); // truncating top 4 bytes\n\t\t\t} else {\n\t\t\t\tresult.creationTime = parseMp4Date(view.getUint32(i));\n\t\t\t\ti += 4;\n\t\t\t\tresult.modificationTime = parseMp4Date(view.getUint32(i));\n\t\t\t\ti += 4;\n\t\t\t\tresult.timescale = view.getUint32(i);\n\t\t\t\ti += 4;\n\t\t\t\tresult.duration = view.getUint32(i);\n\t\t\t}\n\t\t\ti += 4;\n\n\t\t\t// convert fixed-point, base 16 back to a number\n\t\t\tresult.rate = view.getUint16(i) + view.getUint16(i + 2) / 16;\n\t\t\ti += 4;\n\t\t\tresult.volume = view.getUint8(i) + view.getUint8(i + 1) / 8;\n\t\t\ti += 2;\n\t\t\ti += 2;\n\t\t\ti += 2 * 4;\n\t\t\tresult.matrix = new Uint32Array(data.subarray(i, i + 9 * 4));\n\t\t\ti += 9 * 4;\n\t\t\ti += 6 * 4;\n\t\t\tresult.nextTrackId = view.getUint32(i);\n\t\t\treturn result;\n\t\t},\n\t\tpdin: function (data) {\n\t\t\tlet view = new DataView(data.buffer, data.byteOffset, data.byteLength);\n\t\t\treturn {\n\t\t\t\tversion: view.getUint8(0),\n\t\t\t\tflags: new Uint8Array(data.subarray(1, 4)),\n\t\t\t\trate: view.getUint32(4),\n\t\t\t\tinitialDelay: view.getUint32(8)\n\t\t\t};\n\t\t},\n\t\tsdtp: function (data) {\n\t\t\tlet result = {\n\t\t\t\t\tversion: data[0],\n\t\t\t\t\tflags: new Uint8Array(data.subarray(1, 4)),\n\t\t\t\t\tsamples: []\n\t\t\t\t},\n\t\t\t\ti;\n\n\t\t\tfor (i = 4; i < data.byteLength; i++) {\n\t\t\t\tresult.samples.push({\n\t\t\t\t\tdependsOn: (data[i] & 0x30) >> 4,\n\t\t\t\t\tisDependedOn: (data[i] & 0x0c) >> 2,\n\t\t\t\t\thasRedundancy: data[i] & 0x03\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\tsidx: function (data) {\n\t\t\tlet view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n\t\t\t\tresult = {\n\t\t\t\t\tversion: data[0],\n\t\t\t\t\tflags: new Uint8Array(data.subarray(1, 4)),\n\t\t\t\t\treferences: [],\n\t\t\t\t\treferenceId: view.getUint32(4),\n\t\t\t\t\ttimescale: view.getUint32(8),\n\t\t\t\t\tearliestPresentationTime: view.getUint32(12),\n\t\t\t\t\tfirstOffset: view.getUint32(16)\n\t\t\t\t},\n\t\t\t\treferenceCount = view.getUint16(22),\n\t\t\t\ti;\n\n\t\t\tfor (i = 24; referenceCount; i += 12, referenceCount--) {\n\t\t\t\tresult.references.push({\n\t\t\t\t\treferenceType: (data[i] & 0x80) >>> 7,\n\t\t\t\t\treferencedSize: view.getUint32(i) & 0x7fffffff,\n\t\t\t\t\tsubsegmentDuration: view.getUint32(i + 4),\n\t\t\t\t\tstartsWithSap: !!(data[i + 8] & 0x80),\n\t\t\t\t\tsapType: (data[i + 8] & 0x70) >>> 4,\n\t\t\t\t\tsapDeltaTime: view.getUint32(i + 8) & 0x0fffffff\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\tstbl: function (data) {\n\t\t\treturn {\n\t\t\t\tboxes: mp4toJSON(data)\n\t\t\t};\n\t\t},\n\t\tstco: function (data) {\n\t\t\tlet view = new DataView(data.buffer, data.byteOffset, data.byteLength);\n\t\t\tlet entryCount = view.getUint32(4);\n\t\t\tlet result = {\n\t\t\t\tversion: data[0],\n\t\t\t\tflags: new Uint8Array(data.subarray(1, 4)),\n\t\t\t\tentryCount: entryCount,\n\t\t\t\tchunkOffsets: []\n\t\t\t};\n\t\t\tfor (let i = 8; entryCount; i += 4, entryCount--) {\n\t\t\t\tresult.chunkOffsets.push(view.getUint32(i));\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\tstsc: function (data) {\n\t\t\tlet view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n\t\t\t\tentryCount = view.getUint32(4),\n\t\t\t\tresult = {\n\t\t\t\t\tversion: data[0],\n\t\t\t\t\tflags: new Uint8Array(data.subarray(1, 4)),\n\t\t\t\t\tsampleToChunks: []\n\t\t\t\t},\n\t\t\t\ti;\n\t\t\tfor (i = 8; entryCount; i += 12, entryCount--) {\n\t\t\t\tresult.sampleToChunks.push({\n\t\t\t\t\tfirstChunk: view.getUint32(i),\n\t\t\t\t\tsamplesPerChunk: view.getUint32(i + 4),\n\t\t\t\t\tsampleDescriptionIndex: view.getUint32(i + 8)\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\tstsd: function (data) {\n\t\t\treturn {\n\t\t\t\tversion: data[0],\n\t\t\t\tflags: new Uint8Array(data.subarray(1, 4)),\n\t\t\t\tboxes: mp4toJSON(data.subarray(8))\n\t\t\t};\n\t\t},\n\t\tstsz: function (data) {\n\t\t\tlet view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n\t\t\t\tresult = {\n\t\t\t\t\tversion: data[0],\n\t\t\t\t\tflags: new Uint8Array(data.subarray(1, 4)),\n\t\t\t\t\tsampleSize: view.getUint32(4),\n\t\t\t\t\tentries: []\n\t\t\t\t},\n\t\t\t\ti;\n\t\t\tfor (i = 12; i < data.byteLength; i += 4) {\n\t\t\t\tresult.entries.push(view.getUint32(i));\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\tstts: function (data) {\n\t\t\tlet view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n\t\t\t\tresult = {\n\t\t\t\t\tversion: data[0],\n\t\t\t\t\tflags: new Uint8Array(data.subarray(1, 4)),\n\t\t\t\t\ttimeToSamples: []\n\t\t\t\t},\n\t\t\t\tentryCount = view.getUint32(4),\n\t\t\t\ti;\n\n\t\t\tfor (i = 8; entryCount; i += 8, entryCount--) {\n\t\t\t\tresult.timeToSamples.push({\n\t\t\t\t\tsampleCount: view.getUint32(i),\n\t\t\t\t\tsampleDelta: view.getUint32(i + 4)\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\tstyp: function (data) {\n\t\t\treturn parse.ftyp(data);\n\t\t},\n\t\ttfdt: function (data) {\n\t\t\treturn {\n\t\t\t\tversion: data[0],\n\t\t\t\tflags: new Uint8Array(data.subarray(1, 4)),\n\t\t\t\tbaseMediaDecodeTime: (data[4] << 24) | (data[5] << 16) | (data[6] << 8) | data[7]\n\t\t\t};\n\t\t},\n\t\ttfhd: function (data) {\n\t\t\tlet view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n\t\t\t\tresult: {\n\t\t\t\t\tversion: number;\n\t\t\t\t\tflags: Uint8Array;\n\t\t\t\t\ttrackId: number;\n\t\t\t\t\tbaseDataOffset?: number;\n\t\t\t\t\tsampleDescriptionIndex?: number;\n\t\t\t\t\tdefaultSampleDuration?: number;\n\t\t\t\t\tdefaultSampleSize?: number;\n\t\t\t\t\tdefaultSampleFlags?: number;\n\t\t\t\t} = {\n\t\t\t\t\tversion: data[0],\n\t\t\t\t\tflags: new Uint8Array(data.subarray(1, 4)),\n\t\t\t\t\ttrackId: view.getUint32(4)\n\t\t\t\t},\n\t\t\t\tbaseDataOffsetPresent = result.flags[2] & 0x01,\n\t\t\t\tsampleDescriptionIndexPresent = result.flags[2] & 0x02,\n\t\t\t\tdefaultSampleDurationPresent = result.flags[2] & 0x08,\n\t\t\t\tdefaultSampleSizePresent = result.flags[2] & 0x10,\n\t\t\t\tdefaultSampleFlagsPresent = result.flags[2] & 0x20,\n\t\t\t\ti;\n\n\t\t\ti = 8;\n\t\t\tif (baseDataOffsetPresent) {\n\t\t\t\ti += 4; // truncate top 4 bytes\n\t\t\t\tresult.baseDataOffset = view.getUint32(12);\n\t\t\t\ti += 4;\n\t\t\t}\n\t\t\tif (sampleDescriptionIndexPresent) {\n\t\t\t\tresult.sampleDescriptionIndex = view.getUint32(i);\n\t\t\t\ti += 4;\n\t\t\t}\n\t\t\tif (defaultSampleDurationPresent) {\n\t\t\t\tresult.defaultSampleDuration = view.getUint32(i);\n\t\t\t\ti += 4;\n\t\t\t}\n\t\t\tif (defaultSampleSizePresent) {\n\t\t\t\tresult.defaultSampleSize = view.getUint32(i);\n\t\t\t\ti += 4;\n\t\t\t}\n\t\t\tif (defaultSampleFlagsPresent) {\n\t\t\t\tresult.defaultSampleFlags = view.getUint32(i);\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\ttkhd: function (data) {\n\t\t\tlet view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n\t\t\t\ti = 4,\n\t\t\t\tresult = {\n\t\t\t\t\tversion: view.getUint8(0),\n\t\t\t\t\tflags: new Uint8Array(data.subarray(1, 4)),\n\t\t\t\t\tcreationTime: new Date(),\n\t\t\t\t\tmodificationTime: new Date(),\n\t\t\t\t\ttrackId: 0,\n\t\t\t\t\tduration: 0,\n\t\t\t\t\tlayer: 0,\n\t\t\t\t\talternateGroup: 0,\n\t\t\t\t\tvolume: 0,\n\t\t\t\t\twidth: 0,\n\t\t\t\t\theight: 0,\n\t\t\t\t\tmatrix: new Uint32Array(0)\n\t\t\t\t};\n\t\t\tif (result.version === 1) {\n\t\t\t\ti += 4;\n\t\t\t\tresult.creationTime = parseMp4Date(view.getUint32(i)); // truncating top 4 bytes\n\t\t\t\ti += 8;\n\t\t\t\tresult.modificationTime = parseMp4Date(view.getUint32(i)); // truncating top 4 bytes\n\t\t\t\ti += 4;\n\t\t\t\tresult.trackId = view.getUint32(i);\n\t\t\t\ti += 4;\n\t\t\t\ti += 8;\n\t\t\t\tresult.duration = view.getUint32(i); // truncating top 4 bytes\n\t\t\t} else {\n\t\t\t\tresult.creationTime = parseMp4Date(view.getUint32(i));\n\t\t\t\ti += 4;\n\t\t\t\tresult.modificationTime = parseMp4Date(view.getUint32(i));\n\t\t\t\ti += 4;\n\t\t\t\tresult.trackId = view.getUint32(i);\n\t\t\t\ti += 4;\n\t\t\t\ti += 4;\n\t\t\t\tresult.duration = view.getUint32(i);\n\t\t\t}\n\t\t\ti += 4;\n\t\t\ti += 2 * 4;\n\t\t\tresult.layer = view.getUint16(i);\n\t\t\ti += 2;\n\t\t\tresult.alternateGroup = view.getUint16(i);\n\t\t\ti += 2;\n\t\t\t// convert fixed-point, base 16 back to a number\n\t\t\tresult.volume = view.getUint8(i) + view.getUint8(i + 1) / 8;\n\t\t\ti += 2;\n\t\t\ti += 2;\n\t\t\tresult.matrix = new Uint32Array(data.subarray(i, i + 9 * 4));\n\t\t\ti += 9 * 4;\n\t\t\tresult.width = view.getUint16(i) + view.getUint16(i + 2) / 16;\n\t\t\ti += 4;\n\t\t\tresult.height = view.getUint16(i) + view.getUint16(i + 2) / 16;\n\t\t\treturn result;\n\t\t},\n\t\ttraf: function (data) {\n\t\t\treturn {\n\t\t\t\tboxes: mp4toJSON(data)\n\t\t\t};\n\t\t},\n\t\ttrak: function (data) {\n\t\t\treturn {\n\t\t\t\tboxes: mp4toJSON(data)\n\t\t\t};\n\t\t},\n\t\ttrex: function (data) {\n\t\t\tlet view = new DataView(data.buffer, data.byteOffset, data.byteLength);\n\t\t\treturn {\n\t\t\t\tversion: data[0],\n\t\t\t\tflags: new Uint8Array(data.subarray(1, 4)),\n\t\t\t\ttrackId: view.getUint32(4),\n\t\t\t\tdefaultSampleDescriptionIndex: view.getUint32(8),\n\t\t\t\tdefaultSampleDuration: view.getUint32(12),\n\t\t\t\tdefaultSampleSize: view.getUint32(16),\n\t\t\t\tsampleDependsOn: data[20] & 0x03,\n\t\t\t\tsampleIsDependedOn: (data[21] & 0xc0) >> 6,\n\t\t\t\tsampleHasRedundancy: (data[21] & 0x30) >> 4,\n\t\t\t\tsamplePaddingValue: (data[21] & 0x0e) >> 1,\n\t\t\t\tsampleIsDifferenceSample: !!(data[21] & 0x01),\n\t\t\t\tsampleDegradationPriority: view.getUint16(22)\n\t\t\t};\n\t\t},\n\t\ttrun: function (data) {\n\t\t\tlet result: {\n\t\t\t\t\tversion: number;\n\t\t\t\t\tflags: Uint8Array;\n\t\t\t\t\tsamples: Array<any>;\n\t\t\t\t\tdataOffset?: number;\n\t\t\t\t} = {\n\t\t\t\t\tversion: data[0],\n\t\t\t\t\tflags: new Uint8Array(data.subarray(1, 4)),\n\t\t\t\t\tsamples: []\n\t\t\t\t},\n\t\t\t\tview = new DataView(data.buffer, data.byteOffset, data.byteLength),\n\t\t\t\tdataOffsetPresent = result.flags[2] & 0x01,\n\t\t\t\tfirstSampleFlagsPresent = result.flags[2] & 0x04,\n\t\t\t\tsampleDurationPresent = result.flags[1] & 0x01,\n\t\t\t\tsampleSizePresent = result.flags[1] & 0x02,\n\t\t\t\tsampleFlagsPresent = result.flags[1] & 0x04,\n\t\t\t\tsampleCompositionTimeOffsetPresent = result.flags[1] & 0x08,\n\t\t\t\tsampleCount = view.getUint32(4),\n\t\t\t\toffset = 8,\n\t\t\t\tsample;\n\n\t\t\tif (dataOffsetPresent) {\n\t\t\t\tresult.dataOffset = view.getUint32(offset);\n\t\t\t\toffset += 4;\n\t\t\t}\n\t\t\tif (firstSampleFlagsPresent && sampleCount) {\n\t\t\t\tsample = {\n\t\t\t\t\tflags: parseSampleFlags(data.subarray(offset, offset + 4))\n\t\t\t\t};\n\t\t\t\toffset += 4;\n\t\t\t\tif (sampleDurationPresent) {\n\t\t\t\t\tsample.duration = view.getUint32(offset);\n\t\t\t\t\toffset += 4;\n\t\t\t\t}\n\t\t\t\tif (sampleSizePresent) {\n\t\t\t\t\tsample.size = view.getUint32(offset);\n\t\t\t\t\toffset += 4;\n\t\t\t\t}\n\t\t\t\tif (sampleCompositionTimeOffsetPresent) {\n\t\t\t\t\tsample.compositionTimeOffset = view.getUint32(offset);\n\t\t\t\t\toffset += 4;\n\t\t\t\t}\n\t\t\t\tresult.samples.push(sample);\n\t\t\t\tsampleCount--;\n\t\t\t}\n\t\t\twhile (sampleCount--) {\n\t\t\t\tsample = {};\n\t\t\t\tif (sampleDurationPresent) {\n\t\t\t\t\tsample.duration = view.getUint32(offset);\n\t\t\t\t\toffset += 4;\n\t\t\t\t}\n\t\t\t\tif (sampleSizePresent) {\n\t\t\t\t\tsample.size = view.getUint32(offset);\n\t\t\t\t\toffset += 4;\n\t\t\t\t}\n\t\t\t\tif (sampleFlagsPresent) {\n\t\t\t\t\tsample.flags = parseSampleFlags(data.subarray(offset, offset + 4));\n\t\t\t\t\toffset += 4;\n\t\t\t\t}\n\t\t\t\tif (sampleCompositionTimeOffsetPresent) {\n\t\t\t\t\tsample.compositionTimeOffset = view.getUint32(offset);\n\t\t\t\t\toffset += 4;\n\t\t\t\t}\n\t\t\t\tresult.samples.push(sample);\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t'url ': function (data) {\n\t\t\treturn {\n\t\t\t\tversion: data[0],\n\t\t\t\tflags: new Uint8Array(data.subarray(1, 4))\n\t\t\t};\n\t\t},\n\t\tvmhd: function (data) {\n\t\t\t//let view = new DataView(data.buffer, data.byteOffset, data.byteLength);\n\t\t\treturn {\n\t\t\t\tversion: data[0],\n\t\t\t\tflags: new Uint8Array(data.subarray(1, 4))\n\t\t\t\t//graphicsmode: view.getUint16(4),\n\t\t\t\t//opcolor: new Uint16Array([view.getUint16(6),\n\t\t\t\t//                          view.getUint16(8),\n\t\t\t\t//                          view.getUint16(10)])\n\t\t\t};\n\t\t}\n\t};\n\n/**\n * Return a javascript array of box objects parsed from an ISO base media file.\n * @param data - the binary data of the media to be inspected\n * @return a javascript array of potentially nested box objects\n */\nlet mp4toJSON = function (data: Uint8Array): Array<any> {\n\tlet i = 0,\n\t\tresult = [],\n\t\tview = new DataView(data.buffer, data.byteOffset, data.byteLength),\n\t\tsize,\n\t\ttype,\n\t\tend,\n\t\tbox;\n\n\twhile (i < data.byteLength) {\n\t\t// parse box data\n\t\t(size = view.getUint32(i)), (type = parseType(data.subarray(i + 4, i + 8)));\n\t\tend = size > 1 ? i + size : data.byteLength;\n\n\t\t// parse type-specific data\n\t\tbox = (\n\t\t\tparse[type] ||\n\t\t\tfunction (data) {\n\t\t\t\treturn {\n\t\t\t\t\tdata: data\n\t\t\t\t};\n\t\t\t}\n\t\t)(data.subarray(i + 8, end));\n\t\tbox.size = size;\n\t\tbox.type = type;\n\n\t\t// store this box and move to the next\n\t\tresult.push(box);\n\t\ti = end;\n\t}\n\treturn result;\n};\n\nexport const MP4Inspect = {\n\tmp4toJSON: mp4toJSON\n};\n","/**\n * @file: demux.js, created at Monday, 23rd December 2019 3:47:23 pm\n * @copyright Copyright (c) 2020\n * @author gem <gems.xu@gmail.com>\n */\n\nimport DemuxFacade from '../demux-facade';\nimport { GlobalOptions } from '../types/globals';\nimport logger from '../util/logger';\nimport { MP4Inspect } from './mp4-inspector';\n\n/**\n * mp4.\n */\nexport class MP4Demux extends DemuxFacade {\n\tconstructor(options: GlobalOptions = {}) {\n\t\tsuper(options);\n\n\t\tsuper.listenEndStream_();\n\t}\n\n\t/**\n\t * This is end pipeline stream\n\t */\n\tget endStream() {\n\t\treturn this;\n\t}\n\n\t/**\n\t * The MP4 data pushed into stream should be complete data.\n\t * @param buffer\n\t */\n\tpush(buffer: ArrayBuffer | Uint8Array) {\n\t\tlet newBuf: Uint8Array = super.constraintPushData_(buffer);\n\n\t\tlogger.log(`mp4 demux received ${newBuf.byteLength} bytes`);\n\n\t\tlet result = MP4Inspect.mp4toJSON(newBuf);\n\n\t\tthis.emit('data', result);\n\t}\n}\n"],"names":["console","global"],"mappings":"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"}